<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>K√≠nh m√°t d√°ng oval Fio</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="1sanpham.css">
</head>
<body>
  <div class="header">
    <div class="logo">Sunshine</div>
    <div class="menu">
      <a href="trangchucuoi.html">Trang ch·ªß</a>
      <a href="sanphamchuan.html">S·∫£n ph·∫©m</a>
      <a href="vechungtoi.html">V·ªÅ ch√∫ng t√¥i</a>
      <a href="cart.html">Gi·ªè H√†ng</a>
    </div>
  </div>
  <div class="container">
    <div class="main">
      <div class="product-image">
        <img src="K√≠nh m√°t d√°ng oval Fio 712.png" alt="K√≠nh m√°t d√°ng oval Fio">
      </div>
    </div>

    <div class="sidebar">
      <h1 class="product-name">K√≠nh m√°t d√°ng oval Fio</h1>
      
      <div class="product-price">
        <h4>Gi√° b√°n</h4>
        <p class="price">712.000 VND</p>
      </div>
      
      <div class="options">
        <div class="colors">
          <h4>M√†u s·∫Øc: Cam</h4>
          <p></p>
        </div>
      
        <div class="sizes">
          <h4>K√≠ch th∆∞·ªõc: Free Size</h4>
        </div>
      
        <div class="shop-buttons">
          <button class="buy-now">üõí Mua ngay</button>
          <div class="cart">
            <img src="giohangg.png" alt="Gi·ªè h√†ng" class="cart-icon">
          </div>
        </div>
      
        <div class="product-info">
          <h4>Chi ti·∫øt s·∫£n ph·∫©m</h4>
          <ul>
            <li><strong>Ch·∫•t li·ªáu:</strong> Nh·ª±a acetate cao c·∫•p, tr√≤ng k√≠nh ch·ªëng tia UV</li>
            <li><strong>M√†u s·∫Øc:</strong> Cam</li>
            <li><strong>Ki·ªÉu d√°ng:</strong> Oval th·ªùi trang, ph√π h·ª£p c·∫£ nam v√† n·ªØ</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="related-products">
    <p class="chu">S·∫£n ph·∫©m b·∫°n c√≥ th·ªÉ th√≠ch</p>
    <div class="product-grid">
      <a href="kinhmatdangchunhatretrojoymau_kem.html" class="product-link">
        <div class="product-item">
          <img src="K√≠nh m√°t d√°ng ch·ªØ nh·∫≠t retro Joy m√†u kem 682.png" alt="K√≠nh m√°t d√°ng ch·ªØ nh·∫≠t retro Joy m√†u kem" loading="lazy">
          <p class="product-name">K√≠nh m√°t d√°ng ch·ªØ nh·∫≠t retro Joy m√†u kem</p>
          <p class="product-price">682.000 VND</p>
        </div>
      </a>
      <a href="kinhmatdangchunhatzeyda.html" class="product-link">
        <div class="product-item">
          <img src="K√≠nh m√°t d√°ng ch·ªØ nh·∫≠t Zeyda 682.png" alt="K√≠nh m√°t d√°ng ch·ªØ nh·∫≠t Zeyda" loading="lazy">
          <p class="product-name">K√≠nh m√°t d√°ng ch·ªØ nh·∫≠t Zeyda</p>
          <p class="product-price">682.000 VND</p>
        </div>
      </a>
      <a href="kinhmatdangvuongsharontrang.html" class="product-link">
        <div classJugul="product-item">
          <img src="K√≠nh m√°t d√°ng vu√¥ng Sharon tr·∫Øng 682.png" alt="K√≠nh m√°t d√°ng vu√¥ng Sharon tr·∫Øng" loading="lazy">
          <p class="product-name">K√≠nh m√°t d√°ng vu√¥ng Sharon tr·∫Øng</p>
          <p class="product-price">682.000 VND</p>
        </div>
      </a>
      <a href="kinhmatdangvuongsharonxanholive.html" class="product-link">
        <div class="product-item">
          <img src="K√≠nh m√°t d√°ng vu√¥ng Sharon xanh olive 682.png" alt="K√≠nh m√°t d√°ng vu√¥ng Sharon xanh olive" loading="lazy">
          <p class="product-name">K√≠nh m√°t d√°ng vu√¥ng Sharon xanh olive</p>
          <p class="product-price">682.000 VND</p>
        </div>
      </a>
    
    </div>
  </div>

  <div class="popup" id="popup">
    <span class="close-popup" onclick="togglePopup(false)">X</span>
    <div id="orderDetails">
      <img id="popup-img" src="K√≠nh m√°t d√°ng oval Fio 712.png" alt="K√≠nh m√°t d√°ng oval Fio">
      <h3 id="popup-name">K√≠nh m√°t d√°ng oval Fio</h3>
      <p id="popup-color">M√†u: Cam</p>
      <p id="popup-size">Size: Free Size</p>
      <div class="quantity-box">
        <button class="qty-btn qty-decrease">‚àí</button>
        <span id="popup-quantity">1</span>
        <button class="qty-btn qty-increase">+</button>
      </div>
      <p class="price" id="popup-price">Gi√°: 712.000 VND</p>
      <button id="showOrderFormBtn" class="bg-black text-white px-6 py-2 rounded hover:bg-gray-800">ƒê·∫∑t h√†ng ngay</button>
    </div>
  
    <div id="orderForm" class="hidden">
      <h4 class="text-lg font-bold">Th√¥ng tin ƒë·∫∑t h√†ng</h4>
      <input type="text" required placeholder="H·ªç v√† t√™n" class="w-full border p-2 rounded">
      <input type="tel" required placeholder="S·ªë ƒëi·ªán tho·∫°i" class="w-full border p-2 rounded">
      <input type="text" required placeholder="ƒê·ªãa ch·ªâ nh·∫≠n h√†ng" class="w-full border p-2 rounded">
      <button id="confirmOrderBtn" class="w-full bg-green-600 text-white p-2 rounded hover:bg-green-700">X√°c nh·∫≠n ƒë·∫∑t h√†ng</button>
    </div>
  </div>

  <div class="popup" id="cartPopup">
    <span class="close-popup" onclick="toggleCartPopup(false)">X</span>
    <h3>Th√¥ng tin s·∫£n ph·∫©m</h3>
    <div class="cart-details">
      <img id="cart-image" src="K√≠nh m√°t d√°ng oval Fio 712.png" alt="K√≠nh m√°t d√°ng oval Fio" class="cart-image">
      <div class="quantity-box">
        <strong>S·ªë l∆∞·ª£ng:</strong>
        <button class="qty-btn cart-qty-decrease">‚àí</button>
        <span id="cart-quantity">1</span>
        <button class="qty-btn cart-qty-increase">+</button>
      </div>
      <p><strong>M√†u:</strong> <span id="cart-color">Cam</span></p>
      <p><strong>Size:</strong> <span id="cart-size">Free Size</span></p>
      <p><strong>Gi√° ti·ªÅn:</strong> <span id="cart-price">712.000 VND</span></p>
    </div>
    <button id="addToCartBtn" class="add-to-cart-btn">Th√™m v√†o gi·ªè h√†ng</button>
  </div>

  <footer class="footer">
    ¬© 2025 MyShop. All rights reserved.
  </footer>

  <script>
    // H√†m ƒë·ªãnh d·∫°ng gi√° ti·ªÅn
    function formatPrice(price) {
      return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ' VND';
    }

    // X·ª≠ l√Ω popup ƒë·∫∑t h√†ng
    function togglePopup(show) {
      const popup = document.getElementById('popup');
      if (popup) {
        if (show) {
          popup.classList.add('show');
        } else {
          popup.classList.remove('show');
          document.getElementById('orderDetails').classList.remove('hidden');
          document.getElementById('orderForm').classList.add('hidden');
        }
      }
    }

    // X·ª≠ l√Ω popup gi·ªè h√†ng
    function toggleCartPopup(show) {
      const cartPopup = document.getElementById('cartPopup');
      if (cartPopup) {
        cartPopup.classList.toggle('show', show);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const selectedSize = 'Free Size'; // Pre-set size to Free Size
      const selectedColor = 'Cam';
      const selectedImage = 'K√≠nh m√°t d√°ng oval Fio 712.png';
      let currentQuantity = 1;
      const basePrice = 712000; // Base price in VND

      // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng v√† gi√° ti·ªÅn
      function updateQuantity(amount, isCartPopup = false) {
        const maxQuantity = 10;
        currentQuantity = Math.max(1, Math.min(maxQuantity, currentQuantity + amount));
        document.getElementById(isCartPopup ? 'cart-quantity' : 'popup-quantity').innerText = currentQuantity;
        if (!isCartPopup) {
          document.getElementById('cart-quantity').innerText = currentQuantity;
        } else {
          document.getElementById('popup-quantity').innerText = currentQuantity;
        }

        // C·∫≠p nh·∫≠t gi√° ti·ªÅn
        const totalPrice = basePrice * currentQuantity;
        document.getElementById('popup-price').innerText = `Gi√°: ${formatPrice(totalPrice)}`;
        document.getElementById('cart-price').innerText = formatPrice(totalPrice);
      }

      // X·ª≠ l√Ω n√∫t tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng trong popup "Mua ngay"
      const qtyDecrease = document.querySelector('.qty-decrease');
      const qtyIncrease = document.querySelector('.qty-increase');
      if (qtyDecrease) {
        qtyDecrease.addEventListener('click', () => updateQuantity(-1));
      }
      if (qtyIncrease) {
        qtyIncrease.addEventListener('click', () => updateQuantity(1));
      }

      // X·ª≠ l√Ω n√∫t tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng trong popup "Gi·ªè h√†ng"
      const cartQtyDecrease = document.querySelector('.cart-qty-decrease');
      const cartQtyIncrease = document.querySelector('.cart-qty-increase');
      if (cartQtyDecrease) {
        cartQtyDecrease.addEventListener('click', () => updateQuantity(-1, true));
      }
      if (cartQtyIncrease) {
        cartQtyIncrease.addEventListener('click', () => updateQuantity(1, true));
      }

      // X·ª≠ l√Ω n√∫t "Mua ngay"
      const buyBtn = document.querySelector('.buy-now');
      if (buyBtn) {
        buyBtn.addEventListener('click', () => {
          document.getElementById('popup-img').src = selectedImage;
          document.getElementById('popup-color').innerText = 'M√†u: ' + selectedColor;
          document.getElementById('popup-size').innerText = 'Size: ' + selectedSize;
          document.getElementById('popup-quantity').innerText = currentQuantity;
          document.getElementById('popup-price').innerText = `Gi√°: ${formatPrice(basePrice * currentQuantity)}`;
          togglePopup(true);
        });
      }

      // X·ª≠ l√Ω n√∫t "Th√™m v√†o gi·ªè h√†ng"
      const cartIcon = document.querySelector('.cart-icon');
      if (cartIcon) {
        cartIcon.addEventListener('click', () => {
          document.getElementById('cart-image').src = selectedImage;
          document.getElementById('cart-color').innerText = selectedColor;
          document.getElementById('cart-size').innerText = selectedSize;
          document.getElementById('cart-quantity').innerText = currentQuantity;
          document.getElementById('cart-price').innerText = formatPrice(basePrice * currentQuantity);
          toggleCartPopup(true);
        });
      }

      // X·ª≠ l√Ω popup gi·ªè h√†ng
      const addToCartBtn = document.getElementById('addToCartBtn');
      if (addToCartBtn) {
        addToCartBtn.addEventListener('click', () => {
          const cartQuantity = document.getElementById('cart-quantity').innerText;
          const cartColor = selectedColor;
          const cartSize = selectedSize;
          const cartPrice = formatPrice(basePrice * parseInt(cartQuantity));
          const cartImage = selectedImage;
          const cartName = document.getElementById('popup-name').innerText;

          const product = {
            name: cartName,
            quantity: parseInt(cartQuantity),
            color: cartColor,
            size: cartSize,
            price: cartPrice,
            image: cartImage,
          };

          let cart = JSON.parse(localStorage.getItem('cart')) || [];
          cart.push(product);
          localStorage.setItem('cart', JSON.stringify(cart));

          alert('ƒê√£ th√™m v√†o gi·ªè h√†ng!');
          toggleCartPopup(false);
        });
      }

      const showOrderFormBtn = document.getElementById('showOrderFormBtn');
      if (showOrderFormBtn) {
        showOrderFormBtn.addEventListener('click', () => {
          document.getElementById('orderDetails').classList.add('hidden');
          document.getElementById('orderForm').classList.remove('hidden');
        });
      }

      const confirmOrderBtn = document.getElementById('confirmOrderBtn');
      if (confirmOrderBtn) {
        confirmOrderBtn.addEventListener('click', () => {
          const inputs = document.querySelectorAll('#orderForm input');
          let isValid = true;
          inputs.forEach(input => {
            if (!input.value.trim()) {
              isValid = false;
              input.classList.add('invalid');
              setTimeout(() => input.classList.remove('invalid'), 300);
            } else {
              input.classList.remove('invalid');
            }
          });
          if (!isValid) {
            alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.');
            return;
          }
          if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒë·∫∑t h√†ng?')) {
            alert('C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t h√†ng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm nh·∫•t.');
            togglePopup(false);
          }
        });
      }
    });
  </script>
</body>
</html>