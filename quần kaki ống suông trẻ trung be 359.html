<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang s·∫£n ph·∫©m ƒë·∫πp</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="2sanpham.css">
</head>
<body>
  <div class="header">
    <div class="logo">MyShop</div>
    <div class="menu">
      <a href="#">Trang ch·ªß</a>
      <a href="#">S·∫£n ph·∫©m</a>
      <a href="#">Li√™n h·ªá</a>
      <a href="cart.html">Gi·ªè H√†ng</a>
    </div>
  </div>

  <div class="container">
    <div class="main">
      <div class="slider" id="slider">
        <div class="slide active"><img src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png" alt="·∫¢nh 1"></div>
        <div class="slide"><img src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung ƒëen 359.png" alt="·∫¢nh 2"></div>
        <div class="slide"><img src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung h·ªìng 359.png" alt="·∫¢nh 3"></div>
        <div class="slide"><img src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung x√°m 359.png" alt="·∫¢nh 4"></div>
        <button class="prev">‚ùÆ</button>
        <button class="next">‚ùØ</button>
        <div class="dots">
          <span class="dot active" data-index="0"></span>
          <span class="dot" data-index="1"></span>
          <span class="dot" data-index="2"></span>
          <span class="dot" data-index="3"></span>
        </div>
      </div>

      <div class="thumbnails">
        <img class="thumbnail active" src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png" alt="·∫¢nh nh·ªè 1" data-index="0">
        <img class="thumbnail" src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung ƒëen 359.png" alt="·∫¢nh nh·ªè 2" data-index="1">
        <img class="thumbnail" src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung h·ªìng 359.png" alt="·∫¢nh nh·ªè 3" data-index="2">
        <img class="thumbnail" src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung x√°m 359.png" alt="·∫¢nh nh·ªè 4" data-index="3">
      </div>
    </div>

    <div class="sidebar">
      <h1 class="product-name">Qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung</h1>
      
      <div class="product-price">
        <h4>Gi√° b√°n</h4>
        <p class="price">359.000 VND</p>
      </div>
      
      <div class="options">
        <div class="colors">
          <h4>Ch·ªçn m√†u:</h4>
          <button class="color-option" style="background: beige;" title="Be" data-image="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png"></button>
          <button class="color-option" style="background: black;" title="ƒêen" data-image="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung ƒëen 359.png"></button>
          <button class="color-option" style="background: pink;" title="H·ªìng" data-image="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung h·ªìng 359.png"></button>
          <button class="color-option" style="background: gray;" title="X√°m" data-image="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung x√°m 359.png"></button>
        </div>
      
        <div class="sizes">
          <h4>Ch·ªçn size:</h4>
          <div class="size-options">
            <button class="size-option" data-size="S">S</button>
            <button class="size-option" data-size="M">M</button>
            <button class="size-option" data-size="L">L</button>
            <button class="size-option" data-size="XL">XL</button>
          </div>
        </div>
      
        <div class="size-guide">
          <h4>H∆∞·ªõng d·∫´n ch·ªçn size:</h4>
          <a href="javascript:void(0)" class="toggle-size-guide">Nh·∫•n v√†o ƒë√¢y ƒë·ªÉ xem h∆∞·ªõng d·∫´n</a>
          <img id="size-guide-img" src="chonsize.png" alt="H∆∞·ªõng d·∫´n ch·ªçn size" class="imgsize">
        </div>
      
        <div class="shop-buttons">
          <button class="buy-now">üõí Mua ngay</button>
          <div class="cart">
            <img src="giohangg.png" alt="Gi·ªè h√†ng" class="cart-icon">
          </div>
        </div>
      
        <div class="product-info">
          <h4>Chi ti·∫øt s·∫£n ph·∫©m</h4>
          <ul>
            <li><strong>Ch·∫•t li·ªáu:</strong> Kaki cao c·∫•p, m·ªÅm m·∫°i</li>
            <li><strong>M√†u s·∫Øc:</strong> Be, ƒêen, H·ªìng, X√°m</li>
            <li><strong>Ki·ªÉu d√°ng:</strong> ·ªêng su√¥ng, tr·∫ª trung</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="related-products">
    <p class="chu">S·∫£n ph·∫©m b·∫°n c√≥ th·ªÉ th√≠ch</p>
    <div class="product-grid">
      <a href="qu·∫ßn kaki cap chun d√¢y r√∫t ƒëen 299.html" class="product-link">
        <div class="product-item">
          <img src="qu·∫ßn kaki cap chun d√¢y r√∫t ƒëen 299.png" alt="S·∫£n ph·∫©m 1" loading="lazy">
          <p class="product-name">Qu·∫ßn kaki cap chun d√¢y r√∫t</p>
          <p class="product-price">299.000 VND</p>
        </div>
      </a>
      <a href="qu·∫ßn kaki hai c√∫c x·∫ª ch√¢n sau 365.html" class="product-link">
        <div class="product-item">
          <img src="qu·∫ßn kaki hai c√∫c x·∫ª ch√¢n sau 365.png" alt="S·∫£n ph·∫©m 2" loading="lazy">
          <p class="product-name">Qu·∫ßn kaki hai c√∫c x·∫ª ch√¢n sau </p>
          <p class="product-price">365.000 VND</p>
        </div>
      </a>
      <a href="qu·∫ßn kaki loe g·∫•u r√°ch 235.html" class="product-link">
        <div class="product-item">
          <img src="qu·∫ßn kaki loe g·∫•u r√°ch 235.png" alt="S·∫£n ph·∫©m 3" loading="lazy">
          <p class="product-name">Qu·∫ßn kaki loe g·∫•u r√°ch </p>
          <p class="product-price">235.000 VND</p>
        </div>
      </a>
      <a href="qu·∫ßn kaki m·∫´u m·ªõi h·ªìng 415.html" class="product-link">
        <div class="product-item">
          <img src="qu·∫ßn kaki m·∫´u m·ªõi h·ªìng 415.png" alt="S·∫£n ph·∫©m 4" loading="lazy">
          <p class="product-name">Qu·∫ßn kaki m·∫´u m·ªõi </p>
          <p class="product-price">415.000 VND</p>
        </div>
      </a>
    </div>
  </div>

  <div class="popup" id="popup">
    <span class="close-popup">X</span>
    <div id="orderDetails">
      <img id="popup-img" src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png" alt="·∫¢nh s·∫£n ph·∫©m">
      <h3 id="popup-name">Qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung</h3>
      <p id="popup-color">M√†u: Be</p>
      <p id="popup-size">Size: M</p>
      <div class="quantity-box">
        <button class="qty-btn qty-decrease">‚àí</button>
        <span id="popup-quantity">1</span>
        <button class="qty-btn qty-increase">+</button>
      </div>
      <p class="price" id="popup-price">Gi√°: 359.000 VND</p>
      <button id="showOrderFormBtn" class="bg-black text-white px-6 py-2 rounded hover:bg-gray-800">ƒê·∫∑t h√†ng ngay</button>
    </div>
  
    <div id="orderForm" class="hidden">
      <h4 class="text-lg font-bold">Th√¥ng tin ƒë·∫∑t h√†ng</h4>
      <input type="text" required placeholder="H·ªç v√† t√™n" class="w-full border p-2 rounded">
      <input type="tel" required placeholder="S·ªë ƒëi·ªán tho·∫°i" class="w-full border p-2 rounded">
      <input type="text" required placeholder="ƒê·ªãa ch·ªâ nh·∫≠n h√†ng" class="w-full border p-2 rounded">
      <button id="confirmOrderBtn" class="w-full bg-green-600 text-white p-2 rounded hover:bg-green-700">X√°c nh·∫≠n ƒë·∫∑t h√†ng</button>
    </div>
  </div>

  <div class="popup" id="cartPopup">
    <span class="close-popup">X</span>
    <h3>Th√¥ng tin s·∫£n ph·∫©m</h3>
    <div class="cart-details">
      <img id="cart-image" src="qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png" alt="·∫¢nh s·∫£n ph·∫©m ƒë√£ ch·ªçn" class="cart-image">
      <div class="quantity-box">
        <strong>S·ªë l∆∞·ª£ng:</strong>
        <button class="qty-btn cart-qty-decrease">‚àí</button>
        <span id="cart-quantity">1</span>
        <button class="qty-btn cart-qty-increase">+</button>
      </div>
      <p><strong>M√†u:</strong> <span id="cart-color">Be</span></p>
      <p><strong>Size:</strong> <span id="cart-size">M</span></p>
      <p><strong>Gi√° ti·ªÅn:</strong> <span id="cart-price">359.000 VND</span></p>
    </div>
    <button id="addToCartBtn" class="add-to-cart-btn">Th√™m v√†o gi·ªè h√†ng</button>
  </div>

  <footer class="footer">
    ¬© 2025 MyShop. All rights reserved.
  </footer>

  <script>
    // H√†m ƒë·ªãnh d·∫°ng gi√° ti·ªÅn
    function formatPrice(price) {
      return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ' VND';
    }

    // X·ª≠ l√Ω h∆∞·ªõng d·∫´n ch·ªçn size
    function toggleSizeGuide() {
      const sizeGuideImg = document.getElementById('size-guide-img');
      if (!sizeGuideImg) {
        console.error('Size guide image not found');
        return;
      }
      sizeGuideImg.classList.toggle('show');
    }

    // X·ª≠ l√Ω popup ƒë·∫∑t h√†ng
    function togglePopup(show) {
      const popup = document.getElementById('popup');
      if (!popup) {
        console.error('Popup element not found');
        return;
      }
      popup.classList.toggle('show', show);
      if (!show) {
        document.getElementById('orderDetails').classList.remove('hidden');
        document.getElementById('orderForm').classList.add('hidden');
      }
    }

    // X·ª≠ l√Ω popup gi·ªè h√†ng
    function toggleCartPopup(show) {
      const cartPopup = document.getElementById('cartPopup');
      if (!cartPopup) {
        console.error('Cart popup element not found');
        return;
      }
      cartPopup.classList.toggle('show', show);
    }

    document.addEventListener('DOMContentLoaded', () => {
      let selectedSize = '';
      let selectedColor = 'Be';
      let selectedImage = 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png';
      let currentQuantity = 1;
      const basePrice = 359000;

      // X·ª≠ l√Ω ch·ªçn size
      const sizeOptions = document.querySelectorAll('.size-option');
      if (sizeOptions.length === 0) {
        console.error('No size options found');
      } else {
        sizeOptions.forEach(option => {
          option.addEventListener('click', () => {
            sizeOptions.forEach(opt => opt.classList.remove('active'));
            option.classList.add('active');
            selectedSize = option.getAttribute('data-size');
            console.log('Selected size:', selectedSize);
          });
        });
      }

      // X·ª≠ l√Ω ch·ªçn m√†u
      const colorButtons = document.querySelectorAll('.color-option');
      if (colorButtons.length === 0) {
        console.error('No color options found');
      } else {
        colorButtons.forEach(button => {
          button.addEventListener('click', () => {
            selectedColor = button.title;
            selectedImage = button.getAttribute('data-image');
            const index = 
              selectedImage === 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png' ? 0 :
              selectedImage === 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung ƒëen 359.png' ? 1 :
              selectedImage === 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung h·ªìng 359.png' ? 2 : 3;
            showSlide(index);
            console.log('Selected color:', selectedColor, 'Image:', selectedImage, 'Index:', index);
          });
        });
      }

      // X·ª≠ l√Ω slider
      const slides = document.querySelectorAll('.slide');
      const thumbnails = document.querySelectorAll('.thumbnail');
      const dots = document.querySelectorAll('.dot');
      const prev = document.querySelector('.prev');
      const next = document.querySelector('.next');
      let current = 0;

      if (slides.length === 0 || thumbnails.length === 0 || dots.length === 0) {
        console.error('Slider elements missing');
      }

      function showSlide(index) {
        if (index < 0 || index >= slides.length) {
          console.error('Invalid slide index:', index);
          return;
        }
        slides.forEach(slide => slide.classList.remove('active'));
        thumbnails.forEach(thumb => thumb.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        slides[index].classList.add('active');
        thumbnails[index].classList.add('active');
        dots[index].classList.add('active');
        current = index;
        selectedImage = 
          index === 0 ? 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung be 359.png' :
          index === 1 ? 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung ƒëen 359.png' :
          index === 2 ? 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung h·ªìng 359.png' : 'qu·∫ßn kaki ·ªëng su√¥ng tr·∫ª trung x√°m 359.png';
        selectedColor = 
          index === 0 ? 'Be' : 
          index === 1 ? 'ƒêen' : 
          index === 2 ? 'H·ªìng' : 'X√°m';
      }

      if (prev) {
        prev.addEventListener('click', () => {
          current = (current - 1 + slides.length) % slides.length;
          showSlide(current);
          console.log('Prev clicked, current:', current);
        });
      } else {
        console.error('Previous button not found');
      }

      if (next) {
        next.addEventListener('click', () => {
          current = (current + 1) % slides.length;
          showSlide(current);
          console.log('Next clicked, current:', current);
        });
      } else {
        console.error('Next button not found');
      }

      thumbnails.forEach((thumbnail, index) => {
        thumbnail.addEventListener('click', () => {
          showSlide(index);
          console.log('Thumbnail clicked, index:', index);
        });
      });

      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          showSlide(index);
          console.log('Dot clicked, index:', index);
        });
      });

      // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng v√† gi√°
      function updateQuantity(amount, isCartPopup = false) {
        const maxQuantity = 10;
        currentQuantity = Math.max(1, Math.min(maxQuantity, currentQuantity + amount));
        const popupQuantity = document.getElementById(isCartPopup ? 'cart-quantity' : 'popup-quantity');
        const cartQuantity = document.getElementById(isCartPopup ? 'popup-quantity' : 'cart-quantity');
        if (popupQuantity && cartQuantity) {
          popupQuantity.textContent = currentQuantity;
          cartQuantity.textContent = currentQuantity;
          const totalPrice = basePrice * currentQuantity;
          document.getElementById('popup-price').textContent = `Gi√°: ${formatPrice(totalPrice)}`;
          document.getElementById('cart-price').textContent = formatPrice(totalPrice);
        } else {
          console.error('Quantity elements not found');
        }
      }

      // X·ª≠ l√Ω n√∫t tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng
      const qtyDecrease = document.querySelector('.qty-decrease');
      const qtyIncrease = document.querySelector('.qty-increase');
      if (qtyDecrease) {
        qtyDecrease.addEventListener('click', () => updateQuantity(-1));
      } else {
        console.error('Quantity decrease button not found');
      }
      if (qtyIncrease) {
        qtyIncrease.addEventListener('click', () => updateQuantity(1));
      } else {
        console.error('Quantity increase button not found');
      }

      const cartQtyDecrease = document.querySelector('.cart-qty-decrease');
      const cartQtyIncrease = document.querySelector('.cart-qty-increase');
      if (cartQtyDecrease) {
        cartQtyDecrease.addEventListener('click', () => updateQuantity(-1, true));
      } else {
        console.error('Cart quantity decrease button not found');
      }
      if (cartQtyIncrease) {
        cartQtyIncrease.addEventListener('click', () => updateQuantity(1, true));
      } else {
        console.error('Cart quantity increase button not found');
      }

      // X·ª≠ l√Ω n√∫t "Mua ngay"
      const buyBtn = document.querySelector('.buy-now');
      if (buyBtn) {
        buyBtn.addEventListener('click', () => {
          if (!selectedSize) {
            alert('Vui l√≤ng ch·ªçn size.');
            return;
          }
          const popupImg = document.getElementById('popup-img');
          const popupColor = document.getElementById('popup-color');
          const popupSize = document.getElementById('popup-size');
          const popupQuantity = document.getElementById('popup-quantity');
          const popupPrice = document.getElementById('popup-price');
          if (popupImg && popupColor && popupSize && popupQuantity && popupPrice) {
            popupImg.src = selectedImage;
            popupColor.textContent = 'M√†u: ' + selectedColor;
            popupSize.textContent = 'Size: ' + selectedSize;
            popupQuantity.textContent = currentQuantity;
            popupPrice.textContent = `Gi√°: ${formatPrice(basePrice * currentQuantity)}`;
            togglePopup(true);
          } else {
            console.error('Popup elements missing');
          }
        });
      } else {
        console.error('Buy now button not found');
      }

      // X·ª≠ l√Ω n√∫t "Th√™m v√†o gi·ªè h√†ng"
      const cartIcon = document.querySelector('.cart-icon');
      if (cartIcon) {
        cartIcon.addEventListener('click', () => {
          if (!selectedSize) {
            alert('Vui l√≤ng ch·ªçn size.');
            return;
          }
          const cartImage = document.getElementById('cart-image');
          const cartColor = document.getElementById('cart-color');
          const cartSize = document.getElementById('cart-size');
          const cartQuantity = document.getElementById('cart-quantity');
          const cartPrice = document.getElementById('cart-price');
          if (cartImage && cartColor && cartSize && cartQuantity && cartPrice) {
            cartImage.src = selectedImage;
            cartColor.textContent = selectedColor;
            cartSize.textContent = selectedSize;
            cartQuantity.textContent = currentQuantity;
            cartPrice.textContent = formatPrice(basePrice * currentQuantity);
            toggleCartPopup(true);
          } else {
            console.error('Cart popup elements missing');
          }
        });
      } else {
        console.error('Cart icon not found');
      }

      // X·ª≠ l√Ω th√™m v√†o gi·ªè h√†ng
      const addToCartBtn = document.getElementById('addToCartBtn');
      if (addToCartBtn) {
        addToCartBtn.addEventListener('click', () => {
          if (typeof Storage === 'undefined') {
            alert('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ localStorage.');
            return;
          }
          const cartQuantity = document.getElementById('cart-quantity');
          const popupName = document.getElementById('popup-name');
          if (!cartQuantity || !popupName) {
            console.error('Cart quantity or popup name element missing');
            return;
          }
          const product = {
            name: popupName.textContent,
            quantity: parseInt(cartQuantity.textContent),
            color: selectedColor,
            size: selectedSize,
            price: formatPrice(basePrice * parseInt(cartQuantity.textContent)),
            image: selectedImage
          };
          let cart = JSON.parse(localStorage.getItem('cart')) || [];
          cart.push(product);
          localStorage.setItem('cart', JSON.stringify(cart));
          console.log('Cart updated:', cart);
          alert('ƒê√£ th√™m v√†o gi·ªè h√†ng!');
          toggleCartPopup(false);
        });
      } else {
        console.error('Add to cart button not found');
      }

      // X·ª≠ l√Ω form ƒë·∫∑t h√†ng
      const showOrderFormBtn = document.getElementById('showOrderFormBtn');
      if (showOrderFormBtn) {
        showOrderFormBtn.addEventListener('click', () => {
          document.getElementById('orderDetails').classList.add('hidden');
          document.getElementById('orderForm').classList.remove('hidden');
        });
      } else {
        console.error('Show order form button not found');
      }

      // X·ª≠ l√Ω x√°c nh·∫≠n ƒë·∫∑t h√†ng
      const confirmOrderBtn = document.getElementById('confirmOrderBtn');
      if (confirmOrderBtn) {
        confirmOrderBtn.addEventListener('click', () => {
          const inputs = document.querySelectorAll('#orderForm input');
          let isValid = true;
          inputs.forEach(input => {
            if (!input.value.trim()) {
              isValid = false;
              input.classList.add('invalid');
              setTimeout(() => input.classList.remove('invalid'), 300);
            } else {
              input.classList.remove('invalid');
            }
          });
          if (!isValid) {
            alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.');
            return;
          }
          if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒë·∫∑t h√†ng?')) {
            alert('C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t h√†ng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm nh·∫•t.');
            togglePopup(false);
          }
        });
      } else {
        console.error('Confirm order button not found');
      }

      // X·ª≠ l√Ω ƒë√≥ng popup
      const closePopups = document.querySelectorAll('.close-popup');
      if (closePopups.length === 0) {
        console.error('Close popup buttons not found');
      } else {
        closePopups.forEach(closeBtn => {
          closeBtn.addEventListener('click', () => {
            togglePopup(false);
            toggleCartPopup(false);
          });
        });
      }

      // X·ª≠ l√Ω size guide toggle
      const sizeGuideToggle = document.querySelector('.toggle-size-guide');
      if (sizeGuideToggle) {
        sizeGuideToggle.addEventListener('click', toggleSizeGuide);
      } else {
        console.error('Size guide toggle not found');
      }
    });
  </script>
</body>
</html>